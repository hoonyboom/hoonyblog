---
title: ì¡°ë“œì˜ ë°ì´í„° ê°€ê³µ
date: '2023-02-09'
categories: coding
tags: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸
description: zod
---
<HeadingNavigator />

ë¹„ë£¨í•œ ë‚˜ë¼ë„ ì½”ë”©ì„ í•˜ë‹¤ ë³´ë©´ ë©”ì´ì € ê¸°ìˆ ì—ë„ ì¢…ì¢… ì•„ì‰¬ì›€ì„ ëŠë‚€ë‹¤.     
ê¸°ì–µë˜ëŠ” ì²«ì§¸ëŠ” `GraphQL` ë•Œë¬¸ì´ë‹¤. ì„œë²„ ìª½ì—ì„œ ì‹¤ì»· ê³µë“¤ì—¬ ìŠ¤í‚¤ë§ˆë¥¼ ì§°ëŠ”ë°, ì´ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— í†µìš©í•˜ì§€ ëª»í•˜ê³  ìƒˆë¡œ íƒ€ì… ì •ì˜ë¥¼ í•´ì•¼ í–ˆì„ ë•Œ ì¢€ ì§œì¦ì´ ë‚¬ë‹¤. ê·¸ ë°˜í–¥ìœ¼ë¡œ ì´ê²ƒì €ê²ƒ ì°¾ì•˜ê³ , `trpc`ë¥¼ ì ‘í•œ ê²ƒë„ ê·¸ë•Œì˜€ë‹¤.  
ê·¸ë ‡ê²Œ ë³´ë©´ ë‘ë²ˆì§¸ë„ ê°™ì€ ë§¥ë½ì´ë‹¤. íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ì†Œê·¹ì„±ì´ë¼ê³  ë¶ˆëŸ¬ë„ ì¢‹ì„ê¹Œ? íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ íƒ€ì… ì²´í¬ë§Œ í•˜ê³  ë§ ê²Œ ì•„ë‹ˆë¼, íŒŒì‹±ê³¼ ë” ë‚˜ì•„ê°€ ê°€ê³µê¹Œì§€ í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ë‹¤ëŠ” ìƒê°ì„ ë”ëŸ¬ í–ˆë‹¤.  
<br/>
`zod`ì˜ ì¡´ì¬ëŠ” ê·¸ëŸ° ë¶ˆë§Œë“¤ê³¼ ë§ë‹¿ì•„ ìˆëŠ” ê²ƒ ê°™ë‹¤.

---

<CH.Spotlight>
```ts vitest.test.ts
import { expect, it } from "vitest";
import { z } from "zod";

const StarWarsPerson = z.object({
  name: z.string(),
});

const StarWarsPeopleResults = z.object({
  results: z.array(StarWarsPerson),
});

export const fetchStarWarsPeople = async () => {
  const data = await fetch(
    "https://www.totaltypescript.com/swapi/people.json",
  ).then((res) => res.json());

  const parsedData = StarWarsPeopleResults.parse(data);

  return parsedData.results;
};

// TEST ğŸ¦–

it("Should resolve the name and nameAsArray", async () => {
  expect((await fetchStarWarsPeople())[0]).toEqual({
    name: "Luke Skywalker",
    nameAsArray: ["Luke", "Skywalker"],
  });
});
```
---
- ë°ì´í„°ë¥¼ `fetch` í•˜ë ¤ í•œë‹¤.  
êµ¬ì¡°ë¥¼ ìƒˆíƒ­ì—ì„œ ë¯¸ë¦¬ ë³´ë©´ ì´ë ‡ë‹¤
<CH.Code>
```ts vitest.test.ts focus=12:15
```
```json data.json
{
  "count": 82,
  "next": "https://swapi.dev/api/people/?page=2",
  "previous": null,
  "results": [
    {
      "name": "Luke Skywalker",
      "height": "172",
      "mass": "77",
      "hair_color": "blond",
      "skin_color": "fair",
      "eye_color": "blue",
      "birth_year": "19BBY",
      "gender": "male",
      "homeworld": "https://swapi.dev/api/planets/1/",
      "films": [
        "https://swapi.dev/api/films/1/",
        "https://swapi.dev/api/films/2/",
        "https://swapi.dev/api/films/3/",
        "https://swapi.dev/api/films/6/"
      ],
      "species": [],
      "vehicles": [
        "https://swapi.dev/api/vehicles/14/",
        "https://swapi.dev/api/vehicles/30/"
      ],
      "starships": [
        "https://swapi.dev/api/starships/12/",
        "https://swapi.dev/api/starships/22/"
      ],
      "created": "2014-12-09T13:50:51.644000Z",
      "edited": "2014-12-20T21:17:56.891000Z",
      "url": "https://swapi.dev/api/people/1/"
    },
    {
      "name": "C-3PO",
      "height": "167",
      "mass": "75",
      "hair_color": "n/a",
      "skin_color": "gold",
      "eye_color": "yellow",
      "birth_year": "112BBY",
      "gender": "n/a",
      "homeworld": "https://swapi.dev/api/planets/1/",
      "films": [
        "https://swapi.dev/api/films/1/",
        "https://swapi.dev/api/films/2/",
        "https://swapi.dev/api/films/3/",
        "https://swapi.dev/api/films/4/",
        "https://swapi.dev/api/films/5/",
        "https://swapi.dev/api/films/6/"
      ],
      "species": [
        "https://swapi.dev/api/species/2/"
      ],
      "vehicles": [],
      "starships": [],
      "created": "2014-12-10T15:10:51.357000Z",
      "edited": "2014-12-20T21:17:50.309000Z",
      "url": "https://swapi.dev/api/people/2/"
    },
    {
      "name": "R2-D2",
      "height": "96",
      "mass": "32",
      "hair_color": "n/a",
      "skin_color": "white, blue",
      "eye_color": "red",
      "birth_year": "33BBY",
      "gender": "n/a",
      "homeworld": "https://swapi.dev/api/planets/8/",
      "films": [
        "https://swapi.dev/api/films/1/",
        "https://swapi.dev/api/films/2/",
        "https://swapi.dev/api/films/3/",
        "https://swapi.dev/api/films/4/",
        "https://swapi.dev/api/films/5/",
        "https://swapi.dev/api/films/6/"
      ],
      "species": [
       "https://swapi.dev/api/species/2/"
      ],
      "vehicles": [],
      "starships": [],
      "created": "2014-12-10T15:11:50.376000Z",
      "edited": "2014-12-20T21:17:50.311000Z",
      "url": "https://swapi.dev/api/people/3/"
    },
    ...ê³„ì†
  ]
}    
```
</CH.Code>
</CH.Spotlight>

`zod`ë¥¼ í†µí•´ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ê°€ì ¸ì˜¬ ê±´ë°,

ë‹¨ìˆœíˆ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ìƒˆë¡œìš´ ë°ì´í„°ë„ ê°€ê³µí•´ ê·¸ ì•ˆì— í¬í•¨ì‹œí‚¤ê³  ì‹¶ì„ ìˆ˜ë„ ìˆë‹¤.
`zod`ëŠ” `fetch` ë‹¨ê³„ì—ì„œ ì´ ì¼ì„ í•œë²ˆì— ê°€ëŠ¥í•˜ê²Œ ë§Œë“ ë‹¤. ë©‹ì§€ë‹¤. ì–´ë–»ê²Œ í• ê¹Œ?

ì—¬ê¸°ì— í•„ìš”í•œ ê±´ `transform()` íŒŒì´í”„ ë¼ì¸ì´ë‹¤. ì¸ìˆ˜ë¡œ í•¨ìˆ˜ë¥¼ ë„£ëŠ”ë°, `transform(()=>void)`
ê·¸ í•¨ìˆ˜ì˜ ì²«ë²ˆì§¸ ì¸ìˆ˜ë¡œëŠ” íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ ì´ì—ˆë˜ ë°ì´í„°ê°€ ë“¤ì–´ì˜¨ë‹¤. `transform((value)=> )`
