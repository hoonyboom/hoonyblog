---
title: "ê·¸íì—˜ ì ì‘ê¸°"
date: "2022-08-25"
categories: "coding"
---

### APIê°€ ë¬´ì—‡ì´ì˜¤?
API: Application Programming Interfaceì˜ ì•½ì  
APIëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ì´ì˜ ì†Œí†µì„ í¬ê´„ì ìœ¼ë¡œ ì¼ì»«ëŠ” ë§ì´ë‹¤.  
ì¼ì¢…ì˜ ì•½ì†, ì •í•´ì§„ ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ íŠ¹ì • ì»¨í…ì¸ (ë°ì´í„°)ë¥¼ ì£¼ê³ ë°›ëŠ” ê²ƒ.  
Rest API, Graphql APIëŠ” ê·¸ëŸ° ë°©ì‹ì¤‘ì˜ í•˜ë‚˜ë‹¤. ëª©ì ì€ ê°™ì§€ë§Œ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼, ë‹¤ë¥¸ ë¬¸ë²•ìœ¼ë¡œ ìš”ì²­ë˜ëŠ” APIì¸ ê²ƒ.  

<br/>
### ê·¸ë ‡ë‹´ ê·¸íì—˜ì€ ë¬´ì—‡ì´ì˜¤?
- REST APIê°€ ì§€ë‹Œ ë¬¸ì œì 
   1. Over-fetching: í•œ ìš”ì²­ì— ë‚´ê°€ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë„ ë“¤ì–´ìˆëŠ” ê²½ìš° -> ë„¤íŠ¸ì›Œí¬ ë‚­ë¹„
   2. *Under-fetching*: í•œ í™”ë©´ì„ ìœ„í•´ ì—¬ëŸ¬ ìš”ì²­ì„ ë³´ë‚´ì•¼ í•˜ëŠ” ê²½ìš° -> ì½”ë“œì˜ ë‚­ë¹„

- ê·¸íì—˜ì€ í•„ìš”í•œ ë°ì´í„°ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ìš”ì²­í•¨ìœ¼ë¡œì¨ ì´ë¥¼ í•´ê²°í•œë‹¤ 

<br/>
### ê·¸ë˜ì„œ ì–´ë–»ê²Œ ì“°ëŠ”ë°ìš”
ì•„ë¬´ë°ì„œë‚˜ ë˜ëŠ” ê±´ ì•„ë‹ˆê³  Graphqlì„ ì´í•´í•˜ëŠ” ì„œë²„ê°€ í•„ìš”  
Graphql-yogaì™€ Apollo serverì—ì„œ ê°™ì€ ê¸°ëŠ¥ì„ ì‹¤í—˜í–ˆëŠ”ë° ì•„í´ë¡œê°€ ë‚˜ì•˜ë‹¤(<Lnk text='ì•„í´ë¡œ' href={'https://gumeun.vercel.app/'} />,
<Lnk text='ìš”ê°€' href={'https://hayan.vercel.app/'} />).  
Next + Apolloì˜ ê²½ìš°, Apollo-server ê°€ ì•„ë‹Œ Apollo-server/micro ë¥¼ ì¨ì¤˜ì•¼ í–ˆìŒ.  
ë¬¼ë¡  ì–´ë–¤ ê±¸ ì¨ë„ Graphql ì„œë²„ê°€ ìš”êµ¬í•˜ëŠ” í•µì‹¬ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤. ë°”ë¡œ <Note>typeDefs</Note>ì™€ <Note>resolvers</Note>ë‹¤.  
<CH.Section>
<CH.Code>
```ts yoga-graphql.ts
import { createServer } from "@graphql-yoga/node";
import { resolvers, typeDefs } from "./schema";

const server = createServer({
  schema: { typeDefs, resolvers },
  endpoint: "/api/graphql",
});

export default server;
```
```ts apollo-graphql.ts
import "reflect-metadata";
import { NextApiRequest, NextApiResponse } from "next";
import { TypeGraphQLServer } from "next-type-graphql";
import { MovieResolver } from "./schema/movie.resolver";

const apolloServer = new TypeGraphQLServer({
  path: "/api/graphql",
  schema: { 
    resolvers: [MovieResolver],
  }, // ì—¬ê¸°ì„  type-graphqlì˜ ì‚¬ìš©ìœ¼ë¡œ typeDefsê°€ ìƒëµë¼ ìˆë‹¤
});
const startServer = apolloServer.start();

export default async function handler(
  req: NextApiRequest,
  res: NextApiResponse,
) {
  await startServer;
  await apolloServer.createHandler()(req, res);
}

export const config = {
  api: {
    bodyParser: false,
  },
};

```
</CH.Code>
[ìš”ê°€ ì˜ˆì‹œ](focus://yoga-graphql.ts#5)   
[ì•„í´ë¡œ + type Graphql ì˜ˆì‹œ](focus://apollo-graphql.ts#8:10)
</CH.Section>

<br/>
### typeDefs?
ë§ ê·¸ëŒ€ë¡œ typeDefs(type definitions), ë°ì´í„°ë“¤ì˜ íƒ€ì… ì •ì˜ë‹¤.  
ê·¸íì—˜ ì‚¬ìš©ìëŠ” ë°ì´í„°ì˜ êµ¬ì„±=shapeë¥¼ ë¨¼ì € ì„œë²„ì— ê¸°ìˆ í•´ì•¼ í•œë‹¤(ê¿°ê³  ìˆì–´ì•¼ í•œë‹¨ ë§)  
ê·¸ë ‡ê²Œ í•´ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ í•„ìš”í•œ ì¿¼ë¦¬ë§Œ ì„ ë³„ì ìœ¼ë¡œ ìš”ì²­í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.  
<br/>
ì–´ë–»ê²Œ ì‘ì„±í•˜ëŠ”ì§€ ì˜ˆë¥¼ ì‚´í´ë³´ì  
(ì˜ˆì‹œëŠ” <Note type="box" iterations={1}>ë…¸ë§ˆë“œì½”ë”</Note>ì˜ ê·¸íì—˜ ê°•ì˜ + ê·¸íì—˜ ê³µì‹ë¬¸ì„œì—ì„œ ë½‘ì•˜ë‹¤).
<br/>

1. **Query íƒ€ì…**
   - í•„ìˆ˜!ë¡œ ì‘ì„±í•´ì•¼ í•˜ëŠ” íƒ€ì…
   - Query íƒ€ì… = Rest APIì˜ GET ìš”ì²­ì´ ë“¤ì–´ì˜¤ëŠ” ê³³ê³¼ ê°™ë‹¤
   - <a>í´ë¼ì—ì„œ fetcherë¥¼ ì˜†ì— ë‘ê³  ë§í•˜ìë©´, Rest APIëŠ” fetcherì— urlì„ ì‹£ì§€ë§Œ, ê·¸íì—˜ì—ì„œëŠ” ë°”ë¡œ ì´ ì¿¼ë¦¬ì˜ ëª¨ì–‘ì„ ì‹£ëŠ”ë‹¤.</a>
   ```gql typeDefs.ts
   const typeDefs = gql`
      type Query {
         allTweets: [Tweet!]!
         tweet(id:ID!): Tweet!
      }
   `
   ```
<br/>

2. **Mutation íƒ€ì…**
   - POST, PUT, DELETE ìš”ì²­ì€ ì´ê³³ì—ì„œ ì²˜ë¦¬
   - í•˜ì§€ë§Œ ì—­í• ì„ ê¸°ì¤€ìœ¼ë¡œ í•œ ê°œë…ì ì¸ êµ¬ë¶„ì¼ ë¿, ì‹¤ì€ Query íƒ€ì…ê³¼ ê¸°ëŠ¥ì ìœ¼ë¡œ ë™ì¼í•˜ë‹¤. ê·¸ë˜ë„ ì•½ì†ì„ ì§€ì¼œì£¼ì
   - Rest APIì˜ url variableì€ ê·¸íì—˜ì—ì„œ argument í˜•íƒœë¡œ ë“¤ì–´ê°„ë‹¤
   ```gql typeDefs.ts
   const typeDefs = gql`
      type Mutation {
         postTweet(text:String, userId: ID): Tweet
         deleteTweet(id:ID): Boolean
      }
      type Query {
         ...
      }
   `
   ```
<br/>

3. **Scalar íƒ€ì…**
   - ê·¸íì—˜ì—ì„œ ê¸°ë³¸ì ì¸ íƒ€ì… ì§€ì •ì— ì‚¬ìš©
   - String, Boolean, Int, Float, ID
   ```gql typeDefs.ts
   const typeDefs = gql`
      type Tweet {
         id: ID
         text: String
      }
      type Query {
         ...
      }
   `
   ```
<br/>

4. Enum íƒ€ì…
   - ì—´ê±°í˜• íƒ€ì…ì´ë¼ê³ ë„ í•œë‹¤. ì¡°ê¸ˆ íŠ¹ë³„í•œ ìŠ¤ì¹¼ë¼ íƒ€ì….
   - íŠ¹ì • ê°’ìœ¼ë¡œ í•„ë“œê°’ì— ì œí•œ(ë˜ëŠ” íŒíŠ¸)ì„ ì¤„ ë•Œ ì‚¬ìš©í•œë‹¤. (typescriptì˜ ë¦¬í„°ëŸ´ íƒ€ì…ì— as constë¥¼ ê±¸ì–´ì¤€ ê²ƒê³¼ ë¹„ìŠ·í•œ ê±¸ë¡œ ì´í•´í•˜ë©´ ë ê¹Œ?).
   ```gql typeDefs.ts
   const typeDefs = gql`
      enum Role {
         ADMIN
         USER
      }
      type Query {
         ...
      }
   `
   ```
<br/>

5. ì¸í„°í˜ì´ìŠ¤
   - ê·¸íì—˜ì—ë„ ì¸í„°í˜ì´ìŠ¤ëŠ” ìˆë‹¤.!
   - ë§ˆì°¬ê°€ì§€ë¡œ ì˜¤ë¸Œì íŠ¸ í˜•ì‹ì´ê³  implementë¥¼ í†µí•´ ìƒì†ë„ ê°€ëŠ¥í•˜ë‹¤.
   ```gql typeDefs.ts
   const typeDefs = gql`
      interface Character {
         id: ID!
         name: String!
         friends: [Character]
         appearsIn: [Episode]!
      }
      type Droid implements Character {
         id: ID!
         name: String!
         friends: [Character]
         appearsIn: [Episode]!
         primaryFunction: String
      }
      type Query {
         hero(episode: Episode): Character
         droid(id: ID!): Droid
      }
   `
   ```
<br/>
6. ìœ ë‹ˆì˜¨ íƒ€ì…
   - íŠ¹ì •í•œ íƒ€ì…êµ°ìœ¼ë¡œ íƒ€ì…ì˜ ë²”ìœ„ë¥¼ í•œì •í•œë‹¤. Enumì´ ë“¤ì–´ì˜¬ ìˆ˜ ìˆëŠ” í•„ë“œê°’ì— ì œí•œì„ ë‘ëŠ” ê±°ë¼ë©´, ìœ ë‹ˆì˜¨ì€ ì§€ì •ëœ íƒ€ì…ë“¤ë¡œ(ì˜¤ë¸Œì íŠ¸ íƒ€ì…ì¼ ìˆ˜ ìˆë‹¤) ì œí•œì„ ë‘ëŠ” ê±¸ë¡œ ì´í•´ì¤‘.
   ```gql typeDefs.ts
   const typeDefs = gql`
      union SearchResult = Human | Droid | Starship
      type Query {
         search(text: String): SearchResult
      }
   `
   ```
<br/>

7. ì¸í’‹ íƒ€ì…
   - ë®¤í…Œì´ì…˜ì— ì‚¬ìš©ë˜ëŠ” ì»¤ìŠ¤í…€ íƒ€ì…ì€ inputì„ ì‚¬ìš©í•œë‹¤.
   - Queryì™€ Mutationì´ ë‹¨ì§€ í‘œê¸°ìƒì˜ êµ¬ë¶„ì¸ ê²ƒì²˜ëŸ¼, typeê³¼ inputë„ ë¶„ë¦¬í•˜ìëŠ” ì•½ì†ì¼ ë¿ ê¸°ëŠ¥ì ìœ¼ë¡œëŠ” ë™ì¼í•˜ë‹¤.
   ```gql typeDefs.ts
   const typeDefs = gql`
      input ReviewInput {
         stars: Int!
         commentary: String
      }
      type Query {
         ...
      }
   `
   ```
<br/>

8. **Non Nullable field**
   - required í•„ë“œ
   - !ë¥¼ ë‹¬ì•„ì„œ ë§Œë“ ë‹¤
   - ìš”ì²­í•œ ë°ì´í„°ê°€ nullê°’ì´ë©´ ì—ëŸ¬ë¥¼ ë°˜í™˜ 
<br/>

### resolvers
   - ìš”ì²­ëœ ì¿¼ë¦¬ê°€ ì‹¤ì œë¡œ ìˆ˜í–‰í•˜ëŠ” ë™ì‘ë“¤ì˜ ì§‘í•©.
   - ì•ì„œ ì‘ì„±í•œ typeDefsê°€ í´ë¼ì´ì–¸íŠ¸ì™€ ì†Œí†µë˜ëŠ” ì°½êµ¬ë¼ë©´, resolversëŠ” ê·¸ ë°°í›„ì—ì„œ ì´ë£¨ì–´ì§€ëŠ” ë””ë¹„ì™€ì˜ ì†Œí†µì´ë¼ ë´ë„ ë¬´ë°©í•  ë“¯ì‹¶ë‹¤.
   - ì™œëƒë©´ ì¿¼ë¦¬ë‚˜ ë®¤í…Œì´ì…˜, ì„­ìŠ¤í¬ë¦½ì…˜ì´ ë¬´ìŠ¨ ì¼ì„ í–‰í• ì§€ ë‹¤ ë¦¬ì¡¸ë²„ì—ì„œ í’€ì–´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤. ê°€ë ¹ ì¿¼ë¦¬ë¥¼ í†µí•´ GET ìš”ì²­ì„ í–ˆë‹¤ë©´, ê·¸ ì¿¼ë¦¬ëŠ” ìì‹ ê³¼ ëŒ€ì‘í•˜ëŠ” ë¦¬ì¡¸ë²„ë¥¼ í˜¸ì¶œ/ì°¸ê³ í•œë‹¤. ê±°ê¸°ì„œ DBë“  ì™¸ë¶€ APIë“  íŠ¹ì •ê°’ì„ ë¦¬í„´í•˜ë„ë¡ ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤.
   - ì´ë•Œ ë©‹ì§„ ê²ƒì´ íƒ€ì… ê°„ì˜ ìƒí˜¸ì°¸ì¡°ë‹¤. í´ë¼ì—ì„œ ì¿¼ë¦¬ì— ë­”ê°€ë¥¼ GET ìš”ì²­í–ˆì„ ë•Œ, ìš”ì²­ê°’ì´ ë‹¨ìˆœ ê·¸ ì¿¼ë¦¬ì˜ ë¦¬í„´ê°’ìœ¼ë¡œ ì¶©ì¡±ì´ ë˜ì§€ ì•ŠëŠ” ìƒí™©ì´ë¼ë©´(ëª¨ìë€ ë°ì´í„°ê°€ ìˆê²Œ ëœë‹¤ë©´), ê·¸íì—˜ì€ ê·¸ë¥¼ ë§Œì¡±ì‹œí‚¬ ë¦¬ì¡¸ë²„ë¥¼ ì°¾ì•„ë‚´ì–´ ìš”ì²­ëœ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
   ```ts resolvers.ts
   const resolvers = {
      Query: {
         tweet(__, { id }){ // í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚¸ ì¸ìëŠ” ë‘ë²ˆì§¸ íŒŒë§ˆë¦¬í„° ìë¦¬ì— ì‹¤ë¦¼
            return tweets.find(tweet => tweet.id === id) 
         }
      },
      Mutation: {...}
      Tweet: {
         author({ userId }){ // ì²«ë²ˆì§¸ íŒŒë¼ë¯¸í„°ì—ëŠ” Tweetì„ ë°ì´í„° íƒ€ì…ìœ¼ë¡œ í•˜ëŠ” ì¿¼ë¦¬ë“¤ì˜ ë¦¬í„´ê°’ì´ ì‹¤ë¦¼
            return users.find(user => user.id === userId)
         } // authorê°€ ìš”ì²­ëì„ ë•Œ, ì¿¼ë¦¬ì—ì„œ ë¦¬í„´ë˜ëŠ” ë°ì´í„°ì— authorê°€ ì—†ë‹¤ë©´ ì—¬ê¸°ë¥¼ ì°¸ì¡°í•´ì„œ ê°’ì„ êµ¬í•´ê°„ë‹¤.
      }
   }
   ```
   (ì•„ë§ˆ ë§ë¡œë§Œ ë“£ê³  ì´í•´í•˜ê¸´ í˜ë“¤ ê²ƒì´ë‹¤. ì½”ë“œë¥¼ ë´ë„ ë§ˆì°¬ê°€ì§€ã… ë‚˜ì¤‘ì— dbë¡œ ì‘ì—…í•  ë•Œ ì‹¤ì œ ì˜ˆì‹œë¥¼ ë§ëŒ€ëŸ¬ ì˜¤ê² ìˆ©ë‹ˆë‹¤)
<br/>

### í›„ê¸°
ê·¸íì—˜ì˜ ì¥ì ì€ ì•ì—ë„ ì“°ì—¬ ìˆì§€ë§Œ, ë‚œ ì§ì ‘ ì¨ë³´ë©´ì„œ ë°ì´í„°ì— ê´€ì‹¬ì„ ê°–ê²Œ ëœ ê²Œ ì¢€ í° ê±° ê°™ë‹¤. ë”±íˆ ë‚˜ ì˜ë‚¬ë‹¤ëŠ” ë§ì€ ì•„ë‹ˆë‹¤ì•„.. ì–´ì°¨í”¼ í”„ë¡ íŠ¸ì—”ë“œë„ interface ë½‘ìœ¼ë©´ì„œ ë°ì´í„°ì— ëŒ€í•´ ì¼ìƒì ìœ¼ë¡œ íŒŒì•…í•˜ê¸° ë•Œë¬¸ì´ë‹¤.  
ê·¸ëŸ¼ ë­˜ê¹Œ?  
ë‚´ê°€ ë§í•˜ê³  ì‹¶ì€ ê±´ ê·¸ ë‘˜ì„ ë”°ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì˜ ë¶€ë‹¹í•¨, <a>ê³µë“¤ì¸ ìŠ¤í‚¤ë§ˆì™€ ë˜ë‹¤ì‹œ ì‘ì„±ë˜ëŠ” tsë¥¼ í•©ì¹˜ëŠ” ë°©ì‹ì´ ì—†ì„ê¹Œ</a>ì— ëŒ€í•œ ê´€ì‹¬ì´ë‹¤(ì°¨ë¼ë¦¬ í˜¸ê¸°ì‹¬ì´ë¼ê³  í•´ë‘ì). ê·¸ë˜ì„œ ì‚½ì§ˆì„ ì¢€ í–ˆë‹¤.. ğŸ’ğŸ½
<br/>
   1. type-graphql  
   ìì²´ ì˜¤í¼ë ˆì´í„°ë¥¼ í™œìš©í•˜ì—¬ typeDefsë¥¼ ì‘ì„±í•œë‹¤. ê·¸ëŸ°ë° ì†”ì§íˆ ê¹Œë†“ê³  ì–˜ê¸°í•´ë„ ë ê¹Œ? ì²˜ìŒë¶€í„° ëê¹Œì§€ ë³„ë¡œì˜€ë‹¤. ì¼ë‹¨ ì½”ë“œê°€ ê¸¸ì–´ì§€ê³  resolversì— ê°€ì„  ë” ë³µì¡í•´ì§„ë‹¤. ë‚´ ê¶ê¸ˆì¦ì€ ì„œë²„ì—ì„œ ê³µë“¤ì—¬ ì§  ìŠ¤í‚¤ë§ˆë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œë„ í†µìš©ë˜ê²Œ í•  ìˆ˜ ìˆëŠëƒì˜€ëŠ”ë°, ê·¸ê²Œ ì•„ë‹ˆë¼ëŠ” ë°ì„œ í¬ë¦¬í‹°ì»¬í–ˆë‹¤. ë‹¤ì‹  ì•ˆ ë‹¤ë£° ê±° ê°™ì•„ ë‚´ìš©ë„ ê¹Œë¨¹ì–´ë²„ë¦¼.. ã……ã…‚
   <Img src='/images/type-graphql.png' />
<br/>
   2. Prisma + Nexus  
   ì´ê±´ ì¢€ ë²„ê±°ì› ë‹¤. ê³¼ì •ë§Œ ê°„ë‹¨íˆ ì¶”ë¦¬ë©´ ë¨¼ì € 1) í”„ë¦¬ì¦ˆë§ˆë¡œ Model ìŠ¤í‚¤ë§ˆë¥¼ ì§ ë‹¤. 2) ê·¸ëŸ¼ NexusëŠ” ì´ ìŠ¤í‚¤ë§ˆë¥¼ Graphql ìŠ¤í‚¤ë§ˆë¡œ ë³€í™˜í•´ì£¼ëŠ”ë°, makeSchema í›…ì„ ì´ìš©í•´ ì´ë¥¼ ê·¸íì—˜ ì„œë²„ë¡œ ë„˜ê¸°ë©´ ëì´ë‹¤. ë‚˜ë„ ì´ë ‡ê²Œ ë§í•˜ëŠ” ë‚´ê°€ ì‹«ë‹¤ã…ã….. ã…ã….. ì•„ë¬´íŠ¼ ì´ê²ƒë„ í´ë¼ì´ì–¸íŠ¸ì™€ëŠ” ë¬´ê´€í•œ ì¼ì´ì—ˆì§€ë§Œ ê·¸ë˜ë„ Prismaì— ëŒ€í•´ì„  í˜¸ê°? í˜¸ê¸°ì‹¬ì´ë„ ê²Œ ìƒê²¨ì„œ ê³µë¶€í•´ ë³´ê³  ì‹¶ì€ ë§ˆìŒì´ ë“ ë‹¤. ì¼ë‹¨ type-graphql ë³´ë‹¨ ë°±ë§Œë°° ë‚˜ì•˜ìŒ.
<br/>
   3. Graphql Code Generator  
   ê·¸íì—˜ ìŠ¤í‚¤ë§ˆë¥¼ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í˜•íƒœë¡œ ì¶”ì¶œí•´ì¤€ë‹¤. ë‚´ê°€ ì°¾ë˜ ê¸°ëŠ¥ì¼ê¹Œ? ë§ë‹¤. í•˜ì§€ë§Œ ë¬¸ì œëŠ” ì¶”ì¶œëœ íƒ€ì…ì´ ìš°ë¦¬ ì‚¬ëŒë“¤ì´ ì“´ ê²ƒê³¼ ë‹¬ë¦¬ ì½ê¸°ê°€ ê½¤ ë‚œí•´í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. í¸í•˜ê¸°ëŠ” í•œë°, íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ë£¨ëŠ” ë™ë£Œê°€ ë´ë„ íŒŒì•…ì´ ì–´ë µë‹¤ë©´ ì´ê±¸ ì“°ëŠ” ê²Œ ë§ëƒëŠ” ìƒê°.. ì•„ë˜ëŠ” ê³µí™ˆì˜ ì˜ˆì‹œë‹¤. ë¬¼ë¡  ì¡°ê¸ˆë§Œ ì• ì“°ë©´ ì´í•´ê°€ ë˜ì§€ë§Œ, ê·¸ëŸ° ì¡°ê¸ˆì˜ ë…¸ë ¥ë„ ë™ë£Œì—ê² ë¶€ë‹´ì¼ ìˆ˜ ìˆê¸°ì—.. ì•„ë¬´ë˜ë„ ëª‡ë¶„ ê±¸ë ¤ ì§ì ‘ ì“°ëŠ” ê²Œ ë‚˜ì„ ê±° ê°™ë‹¤.

<CH.Code>
```ts schema.graphql
scalar Date

schema {
  query: Query
}

type Query {
  me: User!
  user(id: ID!): User
  allUsers: [User]
  search(term: String!): [SearchResult!]!
  myChats: [Chat!]!
}

enum Role {
  USER
  ADMIN
}

interface Node {
  id: ID!
}

union SearchResult = User | Chat | ChatMessage

type User implements Node {
  id: ID!
  username: String!
  email: String!
  role: Role!
}

type Chat implements Node {
  id: ID!
  users: [User!]!
  messages: [ChatMessage!]!
}

type ChatMessage implements Node {
  id: ID!
  content: String!
  time: Date!
  user: User!
}
```
```ts typed.ts
export type Maybe<T> = T | null;
export type InputMaybe<T> = Maybe<T>;
export type Exact<T extends { [key: string]: unknown }> = { [K in keyof T]: T[K] };
export type MakeOptional<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]?: Maybe<T[SubKey]> };
export type MakeMaybe<T, K extends keyof T> = Omit<T, K> & { [SubKey in K]: Maybe<T[SubKey]> };
/** All built-in and custom scalars, mapped to their actual values */
export type Scalars = {
  ID: string;
  String: string;
  Boolean: boolean;
  Int: number;
  Float: number;
  Date: any;
};

export type Query = {
  __typename?: 'Query';
  me: User;
  user?: Maybe<User>;
  allUsers?: Maybe<Array<Maybe<User>>>;
  search: Array<SearchResult>;
  myChats: Array<Chat>;
};


export type QueryUserArgs = {
  id: Scalars['ID'];
};


export type QuerySearchArgs = {
  term: Scalars['String'];
};

export enum Role {
  User = 'USER',
  Admin = 'ADMIN'
}

export type Node = {
  id: Scalars['ID'];
};

export type SearchResult = User | Chat | ChatMessage;

export type User = Node & {
  __typename?: 'User';
  id: Scalars['ID'];
  username: Scalars['String'];
  email: Scalars['String'];
  role: Role;
};

export type Chat = Node & {
  __typename?: 'Chat';
  id: Scalars['ID'];
  users: Array<User>;
  messages: Array<ChatMessage>;
};

export type ChatMessage = Node & {
  __typename?: 'ChatMessage';
  id: Scalars['ID'];
  content: Scalars['String'];
  time: Scalars['Date'];
  user: User;
};

```
</CH.Code>
<br/>
4. tRpc (+ Prisma)  
ì™€,, ì´ê²Œ ë”± ë‚´ê°€ ì°¾ë˜ ê±°.. ë„ˆë¬´ ì‹ ë°•í–ˆë‹¤. ë³„ë‹¤ë¥¸ ì¶”ì¶œì´ë‚˜ ë³€í™˜ ì—†ì´ë„ ì„œë²„ì˜ ìŠ¤í‚¤ë§ˆë¥¼ í´ë¼ì´ì–¸íŠ¸ì—ì„œ <a>ìœ ì¶”í•´ë‚¸ë‹¤</a>. íƒ€ì…ì´ ì €ì ˆë¡œ ìœ ì¶”ë˜ê¸°ì— ì–´ë–¤ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ ì‘ì„±ë„ ë¶ˆí•„ìš”í•˜ë‹¤. ì„œë²„ì—ì„œì˜ ì„¤ê³„ëŠ” í•œì¸µ ë” ë³µì¡í•´ì§€ê¸´ í–ˆì§€ë§Œ  
tRpcëŠ” ì¡°ë§Œê°„ ë”°ë¡œ í¬ìŠ¤íŒ…í•´ë³´ë ¤ê³  í•˜ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œ ë§ˆì¹œë‹¤.! ì¾…ì¾…
